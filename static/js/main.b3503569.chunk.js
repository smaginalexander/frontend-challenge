(this["webpackJsonpcat-list"]=this["webpackJsonpcat-list"]||[]).push([[0],{19:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(20),i=a.n(s),r=(a(28),a(17)),o=a(7),d=a(2),l=a(9),u=(a(29),a(1));var h=function(e){return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("div",{className:"/"===e.location.pathname?"cats-active cats_type_all":"cats cats_type_all",children:Object(u.jsx)(l.b,{to:"/",className:"/"===e.location.pathname?"header__link-active":"header__link",children:"\u0412\u0441\u0435 \u043a\u043e\u0442\u0438\u043a\u0438"})}),Object(u.jsx)("div",{className:"/saved-cats"===e.location.pathname?"cats-active cats_type_saved":"cats cats_type_saved",children:Object(u.jsx)(l.b,{to:"/saved-cats",className:"/saved-cats"===e.location.pathname?"header__link-active":"header__link",children:"\u041b\u044e\u0431\u0438\u043c\u044b\u0435 \u043a\u043e\u0442\u0438\u043a\u0438"})})]})};a(19);var j=function(e){var t=n.a.useState(!1),a=Object(o.a)(t,2),c=a[0],s=a[1];return Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("img",{className:"card__img",src:e.card.url,alt:"\u043a\u043e\u0442"}),c?Object(u.jsx)("span",{onClick:function(){s(!1)},className:"card__like card__like_true"}):Object(u.jsx)("span",{onClick:function(){s(!0),e.setSavedCat(e.card.id)},className:"card__like card__like_false"})]})};var f=function(e){var t=n.a.useState(!0),a=Object(o.a)(t,2),c=a[0],s=a[1];return Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("img",{className:"card__img",src:e.card.image.url,alt:"\u043a\u043e\u0442"}),c?Object(u.jsx)("span",{onClick:function(){s(!1),e.deleteSavedCat(e.card.id)},className:"card__like card__like_true"}):Object(u.jsx)("span",{onClick:function(){s(!0)},className:"card__like card__like_false"})]})};a(36);var v=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("main",{className:"elements",children:"/"===e.location.pathname?e.catCards.map((function(t){return Object(u.jsx)(j,{card:t,setSavedCat:e.setSavedCat},t._id)})):e.savedCatCards.map((function(t){return Object(u.jsx)(f,{card:t,deleteSavedCat:e.deleteSavedCat},t._id)}))}),"/"===e.location.pathname&&Object(u.jsx)("p",{className:"message",children:"...\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0435\u0449\u0435 \u043a\u043e\u0442\u0438\u043a\u043e\u0432..."})]})},_=a(22),m=a(23),p=new(function(){function e(t){var a=this;Object(_.a)(this,e),this.getCatList=function(e){return fetch("".concat(a._url,"/images/search?limit=15&_page=").concat(e),{headers:{"Content-Type":"application/json","x-api-key":"727b362f-5c6c-4d73-968d-40d05811e067"}}).then(a._checkResult)},this.getSavedCat=function(){return fetch("".concat(a._url,"/favourites"),{headers:{"Content-Type":"application/json","x-api-key":"727b362f-5c6c-4d73-968d-40d05811e067"}}).then(a._checkResult)},this.saveCat=function(e){return fetch("".concat(a._url,"/favourites"),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"727b362f-5c6c-4d73-968d-40d05811e067"},body:JSON.stringify({image_id:e})}).then(a._checkResult)},this.deleteCat=function(e){return fetch("".concat(a._url,"/favourites/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json","x-api-key":"727b362f-5c6c-4d73-968d-40d05811e067"}}).then(a._checkResult)},this._url=t.url,this._headers=t.headers}return Object(m.a)(e,[{key:"_checkResult",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({url:"https://api.thecatapi.com/v1",headers:{"Content-Type":"application/json","x-api-key":"727b362f-5c6c-4d73-968d-40d05811e067"}});a(37);var b=function(){var e=Object(d.e)(),t=n.a.useState([]),a=Object(o.a)(t,2),c=a[0],s=a[1],i=n.a.useState([]),l=Object(o.a)(i,2),j=l[0],f=l[1],_=n.a.useState(1),m=Object(o.a)(_,2),b=m[0],C=m[1],O=n.a.useState(!0),g=Object(o.a)(O,2),x=g[0],k=g[1],S=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&k(!0)};n.a.useEffect((function(){return document.addEventListener("scroll",S),function(){document.removeEventListener("scroll",S)}}),[]),n.a.useEffect((function(){x&&p.getCatList(b).then((function(e){s([].concat(Object(r.a)(c),Object(r.a)(e))),C((function(e){return e+1}))})).catch((function(e){return console.log(e)})).finally((function(){return k(!1)}))}),[x]),n.a.useEffect((function(){p.getSavedCat().then((function(e){f(e)})).catch((function(e){return console.log(e)}))}),[]);var y=function(){p.getSavedCat().then((function(e){localStorage.setItem("savedCats",JSON.stringify(e)),f(JSON.parse(localStorage.getItem("savedCats")))})).catch((function(e){return console.log(e)}))},N=function(e){p.saveCat(e).then((function(){y()}))},E=function(e){p.deleteCat(e).then((function(){y()}))};return Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(h,{location:e}),Object(u.jsx)(d.a,{exact:!0,path:"/",children:Object(u.jsx)(v,{catCards:c,savedCatCards:j,setSavedCat:N,deleteSavedCat:E,location:e})}),Object(u.jsx)(d.a,{path:"/saved-cats",children:Object(u.jsx)(v,{catCards:c,savedCatCards:j,setSavedCat:N,deleteSavedCat:E,location:e})})]})},C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(l.a,{basename:"/frontend-challenge",children:Object(u.jsx)(b,{})})}),document.getElementById("root")),C()}},[[38,1,2]]]);
//# sourceMappingURL=main.b3503569.chunk.js.map